{% extends "base.html" %}
{% block content %}
<h2>Your Notes</h2>

<form method="GET" style="margin-bottom:20px;">
    <input type="text" name="search" placeholder="Search..." value="{{search or ''}}">
    <select name="category">
        <option value="">All Categories</option>
        <option value="Work" {% if category=='Work' %}selected{% endif %}>Work</option>
        <option value="Personal" {% if category=='Personal' %}selected{% endif %}>Personal</option>
        <option value="Ideas" {% if category=='Ideas' %}selected{% endif %}>Ideas</option>
        <option value="Other" {% if category=='Other' %}selected{% endif %}>Other</option>
    </select>
    <button type="submit">Filter</button>
</form>

{% if notes %}
<ul class="note-list">
    {% for note in notes %}
    <li>
        <h3>{{ note.title }}</h3>
        <p>{{ note.content }}</p>
        <p style="font-size:12px; color:#777;">
            Category: {{ note.category or 'None' }} | Created: {{ note.created_at }} | Updated: {{ note.updated_at }}
        </p>
        <a class="edit" href="{{ url_for('edit', id=note.id) }}">Edit</a>
        <a class="delete" href="{{ url_for('delete', id=note.id) }}" onclick="return confirm('Are you sure?');">Delete</a>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No notes found.</p>
{% endif %}
{% endblock %}
